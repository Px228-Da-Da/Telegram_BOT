Telegram-–±–æ—Ç ¬´–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ–ª—å –∑–∞–¥–∞—á¬ª

–ü—Ä–æ—Å—Ç–æ–π –∏ —É–¥–æ–±–Ω—ã–π Telegram-–±–æ—Ç –¥–ª—è –≤—ã–¥–∞—á–∏, –∫–æ–Ω—Ç—Ä–æ–ª—è –∏ –ø—Ä–∏—ë–º–∫–∏ –∑–∞–¥–∞—á –¥–ª—è —Å—Ç–∞–∂—ë—Ä–æ–≤ –∏–ª–∏ –Ω–µ–±–æ–ª—å—à–æ–π –∫–æ–º–∞–Ω–¥—ã. –í—Å—è —Ä–∞–±–æ—Ç–∞ –≤–µ–¥–µ—Ç—Å—è —á–µ—Ä–µ–∑ Telegram –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≤–µ–±-–∞–¥–º–∏–Ω–∫–µ.

üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

–†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å: –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ PM (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä) –∏ –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è.

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏: PM –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–¥–∞—á–∏ –ø–æ —Å—Å—ã–ª–∫–µ –Ω–∞ Notion, –∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ –±–µ—Ä—É—Ç –∏—Ö –≤ —Ä–∞–±–æ—Ç—É.

–¢–∏–ø—ã –∑–∞–¥–∞—á:

–û—Ç–∫—Ä—ã—Ç—ã–µ: –≤–∏–¥–Ω—ã –≤—Å–µ–º –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º.

–¢–æ—á–µ—á–Ω—ã–µ: –Ω–∞–∑–Ω–∞—á–∞—é—Ç—Å—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º –ø–æ @username.

–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª: –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å —Å—Ç–∞—Ç—É—Å–æ–≤ (–Ω–æ–≤–∞—è ‚Üí –≤ —Ä–∞–±–æ—Ç–µ ‚Üí —Å–¥–∞–Ω–∞ / –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞ / –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–∞).

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è: –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç –æ –¥–µ–¥–ª–∞–π–Ω–∞—Ö –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏.

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–∏–º–∏—Ç –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ–º—ã—Ö –∑–∞–¥–∞—á –¥–ª—è –æ–¥–Ω–æ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è.

–ê–Ω–∞–ª–∏—Ç–∏–∫–∞: –ü—Ä–æ—Å—Ç–æ–π —ç–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –∑–∞–¥–∞—á –≤ .csv —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏.

üõ†Ô∏è –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

Python 3.11+

aiogram 3.x

APScheduler (–¥–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –∏ —Ñ–æ–Ω–æ–≤—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫)

SQLite (–¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö)

‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

git clone <URL –≤–∞—à–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è>
cd <–Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞>


2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

# –î–ª—è Windows
python -m venv .venv
.venv\Scripts\activate

# –î–ª—è macOS/Linux
python3 -m venv .venv
source .venv/bin/activate


3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª requirements.txt —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

aiogram==3.*
apscheduler==3.*
python-dateutil
pytz


–ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

pip install -r requirements.txt


4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª config.py –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –µ–≥–æ –ø–æ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–±–ª–æ–Ω—É:

# config.py

# 1. –¢–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç @BotFather
BOT_TOKEN = "–í–ê–®_–¢–û–ö–ï–ù_–ó–î–ï–°–¨"

# 2. Telegram ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (PM). –£–∑–Ω–∞—Ç—å ID –º–æ–∂–Ω–æ —É @userinfobot
PM_IDS = {123456789}

# 3. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –≤–∑—è—Ç—å –æ–¥–∏–Ω –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å
MAX_ACTIVE_TASKS = 1

# 4. –ó–∞ —Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –¥–æ –¥–µ–¥–ª–∞–π–Ω–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
REMINDERS_MIN = [60, 15, 5]

# 5. –ö–∞–∫ —á–∞—Å—Ç–æ (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö) –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
EXPIRE_SCAN_INTERVAL = 60

# 6. –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å —Ç–æ—á–µ—á–Ω–æ–π –∑–∞–¥–∞—á–µ–π, –µ—Å–ª–∏ –æ—Ç –Ω–µ–µ –æ—Ç–∫–∞–∑–∞–ª–∏—Å—å:
# 'same' - –æ—Å—Ç–∞–≤–∏—Ç—å –¥–ª—è —Ç–µ—Ö –∂–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π
# 'open' - —Å–¥–µ–ª–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç–æ–π –¥–ª—è –≤—Å–µ—Ö
DIRECT_REOPEN_POLICY = "same"

# 7. –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
DB_PATH = "./data/bot.db"

# 8. –ü–∞–ø–∫–∞ –¥–ª—è –≤—ã–≥—Ä—É–∑–∫–∏ CSV-–æ—Ç—á–µ—Ç–æ–≤
EXPORT_DIR = "./exports"

# 9. –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
TIMEZONE = "Europe/Kyiv"


5. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –∑–∞–ø—É—Å–∫–æ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ç–∞–±–ª–∏—Ü—ã. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

python -c "from db import init_db; init_db()"


–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞–ø–∫–∏ ./data –∏ ./exports —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞.

6. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

python bot.py


üìã –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è

–î–ª—è PM (–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)

–û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É –∫–æ–º–∞–Ω–¥—É /start. –ë–æ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –≤–∞—Å –∫–∞–∫ PM –∏ –ø–æ–∫–∞–∂–µ—Ç –∞–¥–º–∏–Ω-–º–µ–Ω—é.

‚ûï –î–æ–±–∞–≤–∏—Ç—å: –ó–∞–ø—É—Å–∫–∞–µ—Ç –ø–æ—à–∞–≥–æ–≤—ã–π –º–∞—Å—Ç–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏.

üìã –û—á–µ—Ä–µ–¥—å: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö, –µ—â–µ –Ω–µ –≤–∑—è—Ç—ã—Ö –∑–∞–¥–∞—á.

‚è≥ –í —Ä–∞–±–æ—Ç–µ: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–∏–µ –∑–∞–¥–∞—á–∏ —Å–µ–π—á–∞—Å –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∏ –∫–µ–º.

üîé –ü–æ–∏—Å–∫: –ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–π—Ç–∏ –∑–∞–¥–∞—á—É –ø–æ —á–∞—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è, URL –∏–ª–∏ @username –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è.

üìä –≠–∫—Å–ø–æ—Ä—Ç: –§–æ—Ä–º–∏—Ä—É–µ—Ç –∏ –ø—Ä–∏—Å—ã–ª–∞–µ—Ç –≤–∞–º CSV-–æ—Ç—á–µ—Ç –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é.

–î–ª—è –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è

–û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É –∫–æ–º–∞–Ω–¥—É /start. –ë–æ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤–∞—Å –∏ –ø–æ–∫–∞–∂–µ—Ç –º–µ–Ω—é –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è.

üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ: –°–ø–∏—Å–æ–∫ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∑–∞–¥–∞—á, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –≤–∑—è—Ç—å.

üéØ –ú–æ–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è: –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –ª–∏—á–Ω–æ –≤–∞–º (–ø–æ @username).

üë§ –ú–æ–∏ –∑–∞–¥–∞—á–∏: –í–∞—à–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –¥–ª—è —Å–¥–∞—á–∏ –∏–ª–∏ –æ—Ç–∫–∞–∑–∞.

‚úÖ –°—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

–í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –±–æ—Ç–∞, –ø—Ä–æ–π–¥—è –ø–æ —Å–ª–µ–¥—É—é—â–∏–º —Å—Ü–µ–Ω–∞—Ä–∏—è–º:

–ê–Ω—Ç–∏–¥—É–±–ª—å: –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –¥–≤–µ –∑–∞–¥–∞—á–∏ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º Notion URL. –í—Ç–æ—Ä–∞—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞.

–õ–∏–º–∏—Ç –∑–∞–¥–∞—á: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ MAX_ACTIVE_TASKS = 1. –ü–æ–ø—Ä–æ—Å–∏—Ç–µ –æ–¥–Ω–æ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è –≤–∑—è—Ç—å –∑–∞–¥–∞—á—É, –∞ –∑–∞—Ç–µ–º –ø–æ–ø—ã—Ç–∞–π—Ç–µ—Å—å –≤–∑—è—Ç—å –≤—Ç–æ—Ä—É—é. –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–∫–∞–∑–∞—Ç—å.

–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è: –°–æ–∑–¥–∞–π—Ç–µ –∑–∞–¥–∞—á—É —Å –¥–µ–¥–ª–∞–π–Ω–æ–º +6m (—á–µ—Ä–µ–∑ 6 –º–∏–Ω—É—Ç). –í–æ–∑—å–º–∏—Ç–µ –µ–µ –≤ —Ä–∞–±–æ—Ç—É. –ß–µ—Ä–µ–∑ –º–∏–Ω—É—Ç—É –≤–∞–º –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ "–æ—Å—Ç–∞–ª–æ—Å—å 5 –º–∏–Ω—É—Ç".

–ü—Ä–æ—Å—Ä–æ—á–∫–∞: –°–æ–∑–¥–∞–π—Ç–µ –∑–∞–¥–∞—á—É —Å –¥–µ–¥–ª–∞–π–Ω–æ–º +1m. –í–æ–∑—å–º–∏—Ç–µ –µ–µ –∏ –Ω–µ —Å–¥–∞–≤–∞–π—Ç–µ. –ß–µ—Ä–µ–∑ –º–∏–Ω—É—Ç—É —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ –¥–æ–ª–∂–µ–Ω –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –Ω–∞ expired, –∞ PM –∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∞—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.

–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å —Å–¥–∞–µ—Ç –∑–∞–¥–∞—á—É (‚úÖ –°–¥–∞—Ç—å). PM –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏ –Ω–∞–∂–∏–º–∞–µ—Ç ‚úÖ –ü—Ä–∏–Ω—è—Ç—å —Ä–∞–±–æ—Ç—É. –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ done.

–≠–∫—Å–ø–æ—Ä—Ç: –ù–∞–∂–º–∏—Ç–µ üìä –≠–∫—Å–ø–æ—Ä—Ç –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π CSV-—Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏.